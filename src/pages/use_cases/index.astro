---
import Layout from '../../layouts/BaseLayout.astro';
// Assicurati di sistemare il percorso corretto per importare il componente!
import EquityDiagramAnimated from '../../components/EquityDiagramAnimated.astro'; 
import MarketDiagramAnimated from '../../components/MarketDiagramAnimated.astro';
import FundDiagramAnimated from '../../components/FundDiagramAnimated.astro';

const slides = [
  {
    id: 'funds',
    tag: 'Use Case 01 ¬∑ Funds',
    title: 'Tokenized Funds',
    subtitle: 'From T+3-style operational friction to programmable subscription/redemption rails',
    themeClass: 'theme-funds',
    before: [
      'T+3-oriented workflow with controls concentrated in off-chain checks',
      'Depositary / transfer-agent controls executed manually across fragmented systems',
      'Reconciliation-heavy process before final investor position update'
    ],
    after: [
      'T+1-style operational model with pre-encoded eligibility and rule validation',
      'Whitelisted wallet logic + policy checks executed directly in smart contracts',
      'Faster investor position finalization with shared on-chain event trace'
    ],
    smartness: 'Control logic is moved from manual coordination to deterministic execution steps.'
  },
  {
    id: 'equity',
    tag: 'Use Case 02 ¬∑ Equity',
    title: 'Tokenized Equities',
    subtitle: 'From siloed post-trade rails to coordinated atomic settlement logic',
    themeClass: 'theme-equity',
    before: [
      'Trade execution, clearing, and settlement handled on separate ledgers',
      'CCP/CSD reconciliation chain introduces latency and operational overhead',
      'Ownership and entitlement updates propagate through intermediary layers'
    ],
    after: [
      'Shared transaction state aligns execution, transfer, and ownership updates',
      'Atomic DvP flow reduces break risk between cash and asset legs',
      'Faster entitlement logic for voting/dividends via programmable registry'
    ],
    smartness: 'Transaction-level controls are built into the architecture instead of being patched after execution.'
  },
  {
    id: 'market',
    tag: 'Use Case 03 ¬∑ Market Ecosystem',
    title: 'Tokenized Market Infrastructure',
    subtitle: 'From disconnected controls to one integrated execution + supervision stack',
    themeClass: 'theme-market',
    before: [
      'Risk, compliance, and surveillance distributed across different systems',
      'Onboarding and market-access controls duplicated by each participant',
      'Supervisory visibility delayed by fragmented reporting channels'
    ],
    after: [
      'Permissioned matching with embedded risk/compliance checks in execution path',
      'Oracle-fed controls synchronize valuation and market policy enforcement',
      'Unified audit layer improves operational and supervisory transparency'
    ],
    smartness: 'Market microstructure, controls, and reporting operate as one coherent programmable system.'
  }
];
---

<Layout title="Settlr | Use Cases" description="Before/After use cases adapted from presentation slides.">
  <main class="max-w-[92rem] mx-auto px-4 lg:px-8 py-10">
      <section class="intro reveal rounded-3xl border border-white/10 bg-slate-900/60 backdrop-blur-sm p-8 md:p-12 mb-8">
        <p class="text-indigo-300/90 uppercase tracking-[0.26em] text-xs font-mono">Use Cases Architecture</p>
        <h1 class="text-4xl md:text-6xl font-black text-white mt-3">Before & After Tokenization Assets</h1>
        <p class="text-slate-500 mt-4 max-w-6xl text-base">
          This page presents three practical tokenization use cases, i.e. Funds, Equities, and Market Infrastructure, through a clear Before vs After lens. As you scroll, each section shows how traditional, fragmented, and reconciliation-heavy workflows evolve into programmable, policy-aware processes where controls are embedded directly into execution. The goal is to make one core message easy to grasp: <strong>tokenization is not just digital wrapping of assets, but a redesign of operational logic‚Äîtoward faster settlement, shared data integrity, and more transparent supervision across the full market stack.</strong></p>
      </section>

      <div class="stack-wrap mt-6">
        {slides.map((s, i) => (
          <section id={s.id} class={`slide sticky-slide reveal ${s.themeClass}`} style={`--i:${i};`}>
            <div class="slide-bg"></div>
            <div class="slide-veil"></div>

            <div class="slide-content">
              <div class="topbar">
                <span class="tag">{s.tag}</span>
                <span class="chip-arch">Smart Architecture</span>
              </div>

              <h2 class="title">{s.title}</h2>
              <p class="subtitle">{s.subtitle}</p>

              <div class="grid lg:grid-cols-12 gap-5 mt-7 items-stretch">
                <div class="lg:col-span-4 space-y-4">
                  <div class="panel mini before-card">
                    <h3>Before</h3>
                    <div class="micro-stack">
                      {s.before.map((b) => <p>{b}</p>)}
                    </div>
                  </div>
                  <div class="panel mini after-card">
                    <h3>After</h3>
                    <div class="micro-stack">
                      {s.after.map((a) => <p>{a}</p>)}
                    </div>
                  </div>
                </div>

                <div class="lg:col-span-8 panel slide-under flex flex-col relative overflow-hidden bg-slate-900/90">
                  <h3 class="absolute top-4 left-4 z-30 bg-slate-900/80 px-2 py-1 rounded">Visual Reference</h3>

                  {s.id === 'funds' && (
                    <div class={`slide-visual visual-${s.id} w-full h-full min-h-[330px]`}>
                      <div class="w-full relative z-10 px-4 md:px-8">
                        <FundDiagramAnimated />
                      </div>
                      <span class="orb orb-a"></span><span class="orb orb-b"></span>
                      <span class="sticker s1">‚è±Ô∏è T+1</span>
                      <span class="sticker s2">‚úÖ On-chain checks</span>
                      <span class="sticker s3">üí∏ Faster settlement</span>
                    </div>
                  )}

                  {s.id === 'equity' && (
                    <div class={`slide-visual visual-${s.id} w-full h-full min-h-[330px]`}>
                      
                      <div class="w-full relative z-10 px-4 md:px-8">
                        <EquityDiagramAnimated />
                      </div>
                      
                      <span class="orb orb-a"></span><span class="orb orb-b"></span>
                      <span class="sticker s1">‚ö° T+0 ready</span>
                      <span class="sticker s2">üîÑ Atomic DvP</span>
                      <span class="sticker s3">üß© Shared truth</span>
                    </div>
                  )}

                  {s.id === 'market' && (
                    <div class={`slide-visual visual-${s.id} w-full h-full min-h-[330px]`}>
                      <div class="w-full relative z-10 px-4 md:px-8">
                        <MarketDiagramAnimated />
                      </div>
                      <span class="orb orb-a"></span><span class="orb orb-b"></span>
                      <span class="sticker s1">üõ°Ô∏è Embedded controls</span>
                      <span class="sticker s2">üìà Oracle-fed</span>
                      <span class="sticker s3">üëÅÔ∏è Real-time oversight</span>
                    </div>
                  )}
                </div>
              </div>
            </div>
          </section>
        ))}
      </div>
  </main>

  <style>
    .theme-funds .slide-bg {
      background-image:
        radial-gradient(circle at 10% 10%, rgba(251,146,60,.30), transparent 35%),
        linear-gradient(135deg, rgba(15,23,42,.52) 0%, rgba(23,37,84,.48) 45%, rgba(124,45,18,.40) 100%),
        url('/img/use_cases/bg-funds.jpg');
      background-size: cover;
      background-position: center;
    }
    .theme-equity .slide-bg {
      background-image:
        radial-gradient(circle at 80% 10%, rgba(16,185,129,.28), transparent 35%),
        linear-gradient(135deg, rgba(5,46,43,.50) 0%, rgba(15,23,42,.50) 50%, rgba(30,58,138,.40) 100%),
        url('/img/use_cases/bg-equity.jpg');
      background-size: cover;
      background-position: center;
    }
    .theme-market .slide-bg {
      background-image:
        radial-gradient(circle at 50% 0%, rgba(168,85,247,.26), transparent 35%),
        linear-gradient(135deg, rgba(15,23,42,.50) 0%, rgba(49,46,129,.50) 45%, rgba(15,118,110,.40) 100%),
        url('/img/use_cases/bg-market.jpg');
      background-size: cover;
      background-position: center;
    }

    .reveal { opacity: 0; transform: translateY(20px); transition: opacity .55s ease, transform .55s ease; }
    .reveal.is-visible { opacity: 1; transform: translateY(0); }

    .sticky-slide {
      position: relative; min-height: auto; margin-bottom: 4.5rem;
      border-radius: 26px; border: 1px solid rgba(255,255,255,.12); overflow: hidden;
      background: rgba(15,23,42,.85); box-shadow: 0 20px 60px rgba(0,0,0,.35);
      z-index: auto;
    }
    
    .slide-bg { position: absolute; inset: 0; opacity: 1; transition: background 0.5s ease; filter: saturate(1.1) contrast(1.05); }
    .slide-veil { position: absolute; inset: 0; background: linear-gradient(115deg, rgba(2,6,23,.62), rgba(2,6,23,.42), rgba(2,6,23,.56)); pointer-events: none;}

    .slide-content { position: relative; z-index: 2; padding: 2.5rem; }
    .topbar { display: flex; gap: .7rem; align-items: center; margin-bottom: .6rem; }
    .tag { font-size: 11px; letter-spacing: .16em; text-transform: uppercase; color: #a5b4fc; font-family: 'JetBrains Mono', monospace; }
    .chip-arch { font-size: 11px; border: 1px solid rgba(52,211,153,.35); color: #6ee7b7; background: rgba(16,185,129,.14); padding: .28rem .55rem; border-radius: 999px; }

    .title { font-size: clamp(2rem, 3.5vw, 3rem); font-weight: 900; color: #fff; line-height: 1.05; }
    .subtitle { color: #cbd5e1; margin-top: .5rem; font-size: 1.05rem; }

    .panel { border-radius: 18px; border: 1px solid rgba(148,163,184,.25); background: rgba(2,6,23,.55); padding: 1.25rem; backdrop-filter: blur(8px); }
    .panel h3 { font-size: 11px; text-transform: uppercase; letter-spacing: .18em; margin-bottom: .7rem; font-weight: 800; color: #93c5fd; }

    .mini { background: rgba(2,6,23,.62); }
    .micro-stack { display: grid; gap: .55rem; }
    .micro-stack p { color: #e2e8f0; font-weight: 600; font-size: .92rem; line-height: 1.4; }
    .slide-visual { position: relative; display: flex; align-items: center; justify-content: center; padding: 1rem; padding-top: 3rem; background: rgba(2,6,23,.45); overflow: hidden; }
    .slide-img { width: 100%; height: auto; max-height: 620px; object-fit: contain; border-radius: 10px; border: 1px solid rgba(255,255,255,.12); }
    .sticker { position: absolute; z-index: 20; font-size: .75rem; font-weight: 700; color: #fff; background: rgba(15,23,42,.82); border: 1px solid rgba(148,163,184,.35); border-radius: 999px; padding: .35rem .65rem; backdrop-filter: blur(3px); animation: bob 3.2s ease-in-out infinite; }
    .s1 { top: 3.6rem; left: 1.1rem; }
    .s2 { top: 3.6rem; right: 1.1rem; animation-delay: .7s; }
    .s3 { bottom: 1.1rem; left: 50%; transform: translateX(-50%); animation-delay: 1.2s; }

    @keyframes bob { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-4px); } }
    .s3 { animation-name: bobCenter; }
    @keyframes bobCenter { 0%,100% { transform: translateX(-50%) translateY(0); } 50% { transform: translateX(-50%) translateY(-4px); } }

    .reveal { opacity: 0; transform: translateY(20px); transition: opacity .55s ease, transform .55s ease; }
    .reveal.is-visible { opacity: 1; transform: translateY(0); }

    .sticky-slide { animation: cardIn .55s ease both; }
    @keyframes cardIn { from { opacity: .0; transform: translateY(12px) scale(.99);} to { opacity: 1; transform: translateY(0) scale(1);} }

    .slide-visual::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 20% 20%, rgba(255,255,255,.14), transparent 40%);
      mix-blend-mode: screen;
      pointer-events: none;
    }

    .visual-funds { background: linear-gradient(160deg, rgba(194,65,12,.18), rgba(30,58,138,.2)); }
    .visual-equity { background: linear-gradient(160deg, rgba(16,185,129,.18), rgba(30,64,175,.2)); }
    .visual-market { background: linear-gradient(160deg, rgba(124,58,237,.18), rgba(13,148,136,.2)); }

    .orb { position:absolute; width:14px; height:14px; border-radius:999px; filter: blur(.2px); opacity:.8; pointer-events:none; }
    .orb-a { top: 4.2rem; left: 40%; background:#60a5fa; animation: driftA 5.5s ease-in-out infinite; }
    .orb-b { bottom: 1.8rem; right: 35%; background:#f472b6; animation: driftB 6.2s ease-in-out infinite; }
    @keyframes driftA { 0%,100% { transform: translate(0,0) scale(1);} 50% { transform: translate(14px,-8px) scale(1.18);} }
    @keyframes driftB { 0%,100% { transform: translate(0,0) scale(1);} 50% { transform: translate(-12px,10px) scale(.9);} }

    .slide-img { box-shadow: 0 10px 30px rgba(0,0,0,.35); transition: transform .45s ease, box-shadow .45s ease; }
    .slide-visual:hover .slide-img { transform: scale(1.015); box-shadow: 0 14px 36px rgba(0,0,0,.45); }

    .mini { border-color: rgba(129,140,248,.28); transition: transform .22s ease, box-shadow .22s ease; }
    .mini:hover { transform: scale(1.03); box-shadow: 0 12px 28px rgba(0,0,0,.28); }
    .before-card { background: linear-gradient(160deg, rgba(190,24,93,.24), rgba(51,65,85,.65)); border-color: rgba(244,114,182,.45); }
    .after-card { background: linear-gradient(160deg, rgba(22,163,74,.24), rgba(30,58,138,.55)); border-color: rgba(74,222,128,.45); }
    .before-card h3 { color: #f9a8d4; }
    .after-card h3 { color: #86efac; }
    .micro-stack p { background: rgba(15,23,42,.45); border: 1px solid rgba(148,163,184,.22); padding: .5rem .6rem; border-radius: .65rem; }

  </style>
  <script>
    const io = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        entry.target.classList.add('is-visible');
        io.unobserve(entry.target);
      });
    }, { threshold: 0.12 });
    document.querySelectorAll('.reveal').forEach((el) => io.observe(el));
  </script>
</Layout>